(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{105:function(e,n){},108:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(7),i=t.n(o),s=(t(72),t(139)),c=(t(73),Object(a.createContext)({changeColor:function(e){},setNewUserRegister:function(e){},userList:[],isCurrentUserOnline:!1}));var l=function(e){var n=Object(a.useContext)(c).userList;return console.log("userList",n),r.a.createElement("div",null,r.a.createElement("h1",null,"Clients connected:"),r.a.createElement("ol",null,n.map((function(e,n){return r.a.createElement("li",{key:n},e)}))))};var u=function(e){var n=Object(a.useContext)(c).messages;return console.log("messages",n),r.a.createElement("div",null,r.a.createElement("h1",null,"Messages:"),0===n.length&&r.a.createElement("h4",null,"No messages. Be the first to send a message!"),n.map((function(e,n){return r.a.createElement("span",{key:n},e.senderName,": ",e.message,r.a.createElement("br",null))})))},f=t(17),m=t(133),g=t(138),d=t(140),v=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:200}}}}));var p=function(e){var n=function(e){var n=Object(a.useState)(e),t=Object(f.a)(n,2),r=t[0],o=t[1];return{setValue:o,input:{value:r,onChange:function(e){o(e.target.value)}}}}(""),t=v();return r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),n.input.value&&""!==n.input.value?(console.log("event send.message",n.input.value),e.socket.emit("send.message",n.input.value),n.setValue("")):alert("Cannot send empty message")}},r.a.createElement(g.a,Object.assign({id:"standard-basic",label:"Type some message here"},n.input)),r.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary"},"Send"))},h=t(137),b=Object(m.a)((function(e){return{root:{display:"flex",width:"40%",margin:"0 auto",minWidth:"400px",flexWrap:"wrap","& > *":{margin:e.spacing(10)}},m2:{margin:"2px"}}}));var w=function(e){var n=Object(a.useContext)(c).setNewUserRegister,t=b();return r.a.createElement(h.a,{className:t.root,elevation:3},r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),n(e.target.userName.value)}},r.a.createElement("h2",null,"ReactChat"),r.a.createElement(s.a,{display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(g.a,{className:t.m2,name:"userName",id:"username",label:"username"}),r.a.createElement(d.a,{className:t.m2,type:"submit",variant:"contained",color:"primary"},"Enter"))))},E=t(55),C=t.n(E),O=t(25),j=C()(),y=function(e){!function(e){var n=e.setValue;j.on("user.online",(function(e){var t=e.loggedUsers;n((function(e){return console.log("{ ...state, userList: newUserList }"),Object(O.a)({},e,{userList:t.map((function(e){return e.name}))})}))})),j.on("user.login",(function(){n((function(e){return Object(O.a)({},e,{isCurrentUserOnline:!0})}))})),j.on("user.offline",(function(e){var t=e.loggedUsers;n((function(e){return Object(O.a)({},e,{userList:t})}))})),j.on("user.logoff",(function(){n((function(e){return Object(O.a)({},e,{isCurrentUserOnline:!1})}))})),j.on("message.from.user",(function(e){n((function(n){return Object(O.a)({},n,{messages:n.messages.concat([e])})}))}))}({setValue:e.setValue}),j.emit("queueLengthToSocket")},k=function(e){var n;n=e,j.emit("changeColor",n)},U=function(e){var n;n=e,j.emit("registerNewUser",n)},N=function(e){var n=Object(a.useState)({userList:[],messages:[],isCurrentUserOnline:!1,changeColor:function(e){k(e)},setNewUserRegister:function(e){U(e)}}),t=Object(f.a)(n,2),o=t[0],i=t[1];return Object(a.useEffect)((function(){return y({setValue:i})}),[]),r.a.createElement(c.Provider,{value:o},e.children)};var x=function(){var e=Object(a.useContext)(c).isCurrentUserOnline;return r.a.createElement(s.a,{"align-self":"center",display:"flex",justifyContent:"center",alignItems:"center"},!e&&r.a.createElement(w,null),e&&r.a.createElement("div",null,r.a.createElement(u,null),r.a.createElement(p,{socket:j}),r.a.createElement(l,null)))},L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(N,null,r.a.createElement(x,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");L?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):S(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):S(n,e)}))}}()},67:function(e,n,t){e.exports=t(108)},72:function(e,n,t){},73:function(e,n,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.68fc82d4.chunk.js.map